window.libreriaNavigation=new function(){const i=this;this.siteBranding=document.getElementById("libreria-site-branding"),this.primaryMenu=document.getElementById("libreria-site-navigation"),this.toggleMenu=document.getElementById("libreria-toggle-navigation"),this.mobileMenuOpen=this.siteBranding?this.siteBranding.getElementsByClassName("menu-toggle")[0]:null,this.mobileMenuClose=document.querySelector(".libreria-toggle-navigation__close")||null,this.mobileSubMenu=this.toggleMenu?this.toggleMenu.querySelectorAll(".sub-menu"):null,this.subMenu=this.primaryMenu?this.primaryMenu.querySelectorAll(".sub-menu"):null,this.linksWithChildren=this.primaryMenu?this.primaryMenu.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a"):null,this.links=this.primaryMenu?this.primaryMenu.getElementsByTagName("a"):null,this.toggleTertiaryMenu=document.getElementById("tertiary-navigation"),this.showTertiaryMenu=document.querySelector(".tertiary-menu-toggle"),this.slideUp=(e,t=300)=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},this.slideDown=(e,t=500)=>{e.style.removeProperty("display");let i=window.getComputedStyle(e).display;"none"===i&&(i="block"),e.style.display=i;var o=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},this.slideToggle=(e,t=300)=>"none"===window.getComputedStyle(e).display?i.slideDown(e,t):i.slideUp(e,t),this.openMobileNavigation=function(e){e.preventDefault(),i.toggleMenu.classList.contains("libreria-toggle-navigation--is-opened")||(i.toggleMenu.classList.add("libreria-toggle-navigation--is-opened"),i.mobileMenuOpen.setAttribute("aria-expanded","true"))},this.closeMobileNavigation=function(e){e.preventDefault(),i.toggleMenu.classList.contains("libreria-toggle-navigation--is-opened")&&(i.toggleMenu.classList.remove("libreria-toggle-navigation--is-opened"),i.mobileMenuOpen.setAttribute("aria-expanded","false"))},this.toggleTertiaryNavigation=function(e){e.preventDefault(),i.toggleTertiaryMenu.classList.toggle("toggled")},this.toggleSubMenu=function(e){e.preventDefault(),this.classList.toggle("active");e=e.currentTarget.parentNode.querySelector(".sub-menu");i.slideToggle(e)},this.toggleFocus=function(){if("focus"===event.type||"blur"===event.type){let e=this;for(;!e.classList.contains("nav-menu");)"li"===e.tagName.toLowerCase()&&e.classList.toggle("focus"),e=e.parentNode}if("touchstart"===event.type){const e=this.parentNode;event.preventDefault();for(const t of e.parentNode.children)e!==t&&t.classList.remove("focus");e.classList.toggle("focus")}},this.init=function(){if(i.primaryMenu){i.primaryMenu.classList.contains("nav-menu")||i.primaryMenu.classList.add("nav-menu"),i.mobileMenuOpen&&i.mobileMenuOpen.addEventListener("click",i.openMobileNavigation),i.mobileMenuClose&&i.mobileMenuClose.addEventListener("click",i.closeMobileNavigation),i.showTertiaryMenu&&i.showTertiaryMenu.addEventListener("click",this.toggleTertiaryNavigation),null!==i.mobileSubMenu&&i.mobileSubMenu.forEach(function(e,t){e.parentNode.querySelector(".libreria-submenu-toggle").addEventListener("click",i.toggleSubMenu)});for(const e of this.links)e.addEventListener("focus",this.toggleFocus,!0),e.addEventListener("blur",this.toggleFocus,!0);for(const t of this.linksWithChildren)t.addEventListener("touchstart",this.toggleFocus,{passive:!0})}else i.mobileMenuOpen.style.display="none"},this.init()};