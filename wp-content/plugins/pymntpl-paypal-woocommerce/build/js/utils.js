/*! For license information please see utils.js.LICENSE.txt */
(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.r(e),t.d(e,{SHIPPING_OPTION_REGEX:()=>E,convertCartAddressToPayPal:()=>N,convertPayPalAddressToCart:()=>H,extractFullName:()=>U,extractShippingMethod:()=>G,fieldsToJson:()=>T,getErrorMessage:()=>R,getFieldValue:()=>x,getPage:()=>F,getPayPalQueryParams:()=>I,getRestPath:()=>B,getRestRoute:()=>V,getSetting:()=>k,isPluginConnected:()=>$,isValidAddress:()=>D,isValidFieldValue:()=>L,loadPayPalSdk:()=>A,setFieldValue:()=>M,setSetting:()=>C,submitErrorMessage:()=>q});const a=window.lodash,l=window.jQuery;var c=t.n(l);const u=window.wp.hooks;function s(t,e){void 0===e&&(e={});var n=document.createElement("script");return n.src=t,Object.keys(e).forEach((function(t){n.setAttribute(t,e[t]),"data-csp-nonce"===t&&n.setAttribute("nonce",e["data-csp-nonce"])})),n}function d(t,e){if(void 0===e&&(e=f()),v(t,e),"undefined"==typeof window)return e.resolve(null);var n=function(t){var e="https://www.paypal.com/sdk/js";t.sdkBaseURL&&(e=t.sdkBaseURL,delete t.sdkBaseURL),function(t){var e=t["merchant-id"],n=t["data-merchant-id"],r="",o="";Array.isArray(e)?e.length>1?(r="*",o=e.toString()):r=e.toString():"string"==typeof e&&e.length>0?r=e:"string"==typeof n&&n.length>0&&(r="*",o=n),t["merchant-id"]=r,t["data-merchant-id"]=o}(t);var n,r,o=Object.keys(t).filter((function(e){return void 0!==t[e]&&null!==t[e]&&""!==t[e]})).reduce((function(e,n){var r=t[n].toString();return"data-"===n.substring(0,5)?e.dataAttributes[n]=r:e.queryParams[n]=r,e}),{queryParams:{},dataAttributes:{}}),i=o.queryParams,a=o.dataAttributes;return{url:"".concat(e,"?").concat((n=i,r="",Object.keys(n).forEach((function(t){0!==r.length&&(r+="&"),r+=t+"="+n[t]})),r)),dataAttributes:a}}(t),r=n.url,o=n.dataAttributes,i=o["data-namespace"]||"paypal",a=p(i);return function(t,e){var n=document.querySelector('script[src="'.concat(t,'"]'));if(null===n)return null;var r=s(t,e),o=n.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(r.dataset).length)return null;var i=!0;return Object.keys(o.dataset).forEach((function(t){o.dataset[t]!==r.dataset[t]&&(i=!1)})),i?n:null}(r,o)&&a?e.resolve(a):function(t,e){void 0===e&&(e=f()),v(t,e);var n=t.url,r=t.attributes;if("string"!=typeof n||0===n.length)throw new Error("Invalid url.");if(void 0!==r&&"object"!=typeof r)throw new Error("Expected attributes to be an object.");return new e((function(t,e){if("undefined"==typeof window)return t();!function(t){var e=t.onSuccess,n=t.onError,r=s(t.url,t.attributes);r.onerror=n,r.onload=e,document.head.insertBefore(r,document.head.firstElementChild)}({url:n,attributes:r,onSuccess:function(){return t()},onError:function(){var t=new Error('The script "'.concat(n,'" failed to load.'));return window.fetch?fetch(n).then((function(n){return 200===n.status&&e(t),n.text()})).then((function(t){var n=function(t){var e=t.split("/* Original Error:")[1];return e?e.replace(/\n/g,"").replace("*/","").trim():t}(t);e(new Error(n))})).catch((function(t){e(t)})):e(t)}})}))}({url:r,attributes:o},e).then((function(){var t=p(i);if(t)return t;throw new Error("The window.".concat(i," global variable is not available."))}))}function f(){if("undefined"==typeof Promise)throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function p(t){return window[t]}function v(t,e){if("object"!=typeof t||null===t)throw new Error("Expected an options object.");if(void 0!==e&&"function"!=typeof e)throw new Error("Expected PromisePonyfill to be a function.")}var y=["locale"];function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={},P=!1,O=new Map,j=null,E=/^([\w]+)\:(.+)$/,S={address_1:"address_line_1|line1",address_2:"address_line_2|line2",state:"admin_area_1|state",city:"admin_area_2|city",postcode:"postal_code",country:"country_code"},_={city:"city",state:"state",postal_code:"postcode",country_code:"country"},A=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){!e||(0,a.isEmpty)(e)||(0,a.isEqual)(e,w)?window.paypal&&!P?n(window.paypal):(u.defaultHooks.addAction("paypalInstanceCreated","wcPPCP",(function(t){n(t)})),u.defaultHooks.addAction("paypalLoadError","wcPPCP",(function(){r()}))):(w=e,window.paypal&&u.defaultHooks.doAction("paypalInstanceCleanup",window.paypal),P=!0,d(h({},e)).then((function(t){n(t),u.defaultHooks.doAction("paypalInstanceCreated",t,w)})).catch((function(i){var a,l,c;if(console.log(i),null!=i&&null!==(a=i.message)&&void 0!==a&&a.includes("locale")){e.locale;var s=o(e,y);return t(s).then((function(t){n(t)}))}null!=i&&null!==(l=i.message)&&void 0!==l&&l.includes("client-id not recognized")&&(c={code:"invalid_client_id"}),u.defaultHooks.doAction("paypalLoadError"),r(c)})).finally((function(){P=!1})))}))},k=function(t){return void 0!==window.wcPPCPSettings&&window.wcPPCPSettings[t]||{}},C=function(t,e){if(void 0!==window.wcPPCPSettings)return window.wcPPCPSettings[t]=e},I=function(){return k("queryParams")},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"billing";return"shipping"!=t.substring(0,"shipping".length)&&"billing"!=t.substring(0,"billing".length)&&(t="".concat(e,"_").concat(t)),c()('[name="'.concat(t,'"]')).length?c()('[name="'.concat(t,'"]')).val():O.get(t)},T=function(){var t={};return O.forEach((function(e,n){t[n]=e})),t},M=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"billing";n&&"shipping"!=t.substring(0,"shipping".length)&&"billing"!=t.substring(0,"billing".length)&&(t="".concat(n,"_").concat(t)),O.set(t,e),c()('[name="'.concat(t,'"]')).length&&c()('[name="'.concat(t,'"]')).val(e)},R=function(t){var e=k("errorMessages");return"string"==typeof t?t:null!=t&&t.code&&null!=e&&e[t.code]?e[t.code]:null!=t&&t.message?t.message:void 0},q=function(t,e){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkout";if(null==t||null===(n=t.message)||void 0===n||null===(r=n.toLowerCase())||void 0===r||!r.match(/detected popup close|window is closed/)){var i=R(t),a="woocommerce-NoticeGroup",l=c()(e);"checkout"==o&&(a+=" woocommerce-NoticeGroup-checkout"),i='<div class="'+a+'"><ul class="woocommerce-error"><li>'+i+"</li></ul></div>",c()(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),l.prepend(i),c().scroll_to_notices?c().scroll_to_notices(l):c()("html, body").animate({scrollTop:l.offset().top-100},1e3)}},D=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o="undefined"==typeof wc_address_i18n_params?k("i18n"):wc_address_i18n_params;if((0,a.isEmpty)(t))return!1;if(j||(j=JSON.parse(o.locale.replace(/&quot;/g,'"'))),!t.country||(0,a.isEmpty)(t))return!1;var i=null!==(e=j)&&void 0!==e&&e[t.country]?j[t.country]:j.default;i=c().extend(!0,{},j.default,i);var l=Object.entries(i).filter((function(t){var e=r(t,2),o=e[0];return e[1],!n.includes(o)}));for(var u in i=Object.fromEntries(l)){var s;if(null!==(s=i[u])&&void 0!==s&&s.required){var d=(null==t?void 0:t[u])||null;if(!d||null==d||!d.trim())return!1}}return!0},N=function(t){var e={};for(var n in t)if(null!=S&&S[n])if(S[n].includes("|")){var o=r(S[n].split("|"),2),i=o[0];o[1],e[i]=t[n]}else e[S[n]]=t[n];return e},H=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};n=e?_:Object.fromEntries(Object.entries(S).map((function(t){var e=r(t,2),n=e[0];return[e[1],n]})));var o={};for(var i in n)if(i.includes("|")){var a,l=i.split("|"),c=g(l);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(t.hasOwnProperty(u)){o[n[i]]=t[u];break}o[n[i]]=""}}catch(t){c.e(t)}finally{c.f()}}else t.hasOwnProperty(i)?o[n[i]]=t[i]:o[n[i]]="";return o},L=function(t){var e;return!!(t=null===(e=t)||void 0===e?void 0:e.trim())},G=function(t){var e=t.match(E);return e?i({},e[1],e[2]):null},U=function(t){return[(t=t.trim()).split(" ").slice(0,-1).join(" "),t.split(" ").pop()]},V=function(t){var e,n,r;return(null===(e=k("generalData"))||void 0===e||null===(n=e.restRoutes)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.url)||null},B=function(t){var e,n;return t=t.replace(/^\//,""),null===(e=k("generalData"))||void 0===e||null===(n=e.ajaxRestPath)||void 0===n?void 0:n.replace("%s",t)},F=function(){return k("generalData").page},$=function(){var t,e;return(null===(t=k("generalData"))||void 0===t||null===(e=t.clientId)||void 0===e?void 0:e.length)>0};(this.wcPPCP=this.wcPPCP||{}).utils=e})();
//# sourceMappingURL=utils.js.map